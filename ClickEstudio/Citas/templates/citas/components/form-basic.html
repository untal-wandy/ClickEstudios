<div class="background-containers " id="bg-con">
      <div class="contents">
            <div id="search-div" class="p-2  d-none   justify-content-center  flex-wrap w-100" 
            style="margin: 0 auto; margin-top: 10rem; max-width: 30rem; ">
                  <div class="form-floating  w-100">
                        <input type="search" class="form-control" name="" id="search-client">
                        <label for="search-client">Buscar cliente</label>
                  </div>   
                  <div class="container-list bg-white overflow-auto bg-opacity-10 mt-2" 
                        style="border-radius: 1rem ; max-height: 15rem;">
                      
                  </div>      
                  <div>
                        <span onclick="Alternar()" class='rounded-circle bg-white bg-opacity-10  border-0 mt-2 text-white d-flex justify-content-center align-content-center flex-wrap' style='height: 2rem; width: 2rem;'> 
                              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-left p-0 m-0" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
                              </svg> 
                        </span>
                  </div>
            </div>
          <!-- Aquí va el contenido -->
          <div id="form-div" class="p-2   d-flex justify-content-center  flex-wrap w-100" 
            style="margin: 0 auto; margin-top: 10rem; max-width: 30rem; ">
            <div class="w-100 mb-3" style="line-height: 14px; ">
                  <h4 class="font-primary mt-4 mb-1 " 
                        style="font-size: 16px;">
                        Informacion personal 
                  </h4>
                  <span style="font-size: 14px; " class="text-white-50">
                        Si el usuario fue anteriormente registrado puedes buscarlo dando click aqui -> <strong style="color: #66a6ff !important;" onclick="Alternar()">Buscar Cliente</strong>
                  </span>
            </div>
            <div class="w-100 d-flex  justify-content-center"> 
                  <div class="d-flex  w-100 flex-wrap justify-content-center " 
                  style="max-width: 30rem;">
      
                  <div class="form-floating  w-100">
                        {{form.name}}
                        <label for="id_name">Nombre y apellidos</label>
                  </div>   
                        
                  <div  class="w-100 mt-2" id="email">
                        <div class="form-floating ">
                              {{ form.email }}
                              <label for="id_email">Correo electronico</label>
                        </div>
                  </div>
      
                  <div  class="w-100 mt-2" >
                        <div class="form-floating w-100" id="number" >
                              {{ form.number }}
                              <label for="id_number">Numero </label>
                        </div>
                  </div>
            </div>
            </div>
          
            <span class=" d-flex justify-content-center text-center mt-4 w-100">
                  <span onclick="Next()" style="background-image: linear-gradient(120deg, #89f7fe 0%, #66a6ff 100%) !important; 
                    border-radius: 1.5rem; height: auto;
                    width: 10rem;" class="text-white p-2">
                    Siguiente
                  </span>
            </span>
            {% if service_admin %}

            <div class="w-100 text-center mt-3 mb-5">
                  <a href="{% url "citas:administrations-citas" %}"> 
                        <span class='text-white-50 border-0 bg-transparent font-primary'>
                              Atras
                        </span>      
                  </a>
            </div>
      {% else %}
      <div class='d-flex justify-content-center mb-5 mt-3'>
            <a href="{% url "citas:dashboard-citas" %}"> 
                  <span class='text-white-50 border-0 bg-transparent m font-primary'>
                        Atras
                  </span>      
            </a>
      </div>
      {% endif %}


      </div>
      </div>
</div>

<script>


document.getElementById('id_email').addEventListener('input', function(e) {
    this.value = this.value.replace(/\s/g, ''); // Elimina los espacios
});
function OpenDiv3() {
      const emailField = document.getElementById("email");
      const numberField = document.getElementById("number");

      if (emailField.style.display === "none") {
            emailField.style.display = "block";
            numberField.style.display = "none";
      } else {
            emailField.style.display = "none";
            numberField.style.display = "block";
      }
}

function ActiveButton(buttonId) {
      const btn1 = document.getElementById("btn-1");
      const btn2 = document.getElementById("btn-2");

      if (buttonId === "btn-1") {
            btn1.style.border = "solid 1px rgba(255, 255, 255, 0.733)";
            btn2.style.border = "none";
      } else if (buttonId === "btn-2") {
            btn1.style.border = "none";
            btn2.style.border = "solid 1px rgba(255, 255, 255, 0.733)";
      }
}

const Alternar = () => {
      let div = document.getElementById('form-div');
      let div2 = document.getElementById('search-div');
      
  
      if (div.classList.contains('d-none')) {
            div.classList.remove('d-none'); 
            div2.classList.add('d-none'); // Si no la tiene, la agrega
            // Si tiene la clase, la quita
      } else {
            div.classList.add('d-none'); 
            div2.classList.remove('d-none'); 
      }

};

window.addEventListener("DOMContentLoaded", function() {
    ConfigData();
    
    function ConfigData() {
          const url = '/searching-client';
          $.ajax({
                url: url,
                success: function(data) {
                      const search = document.querySelector('#search-client');
                      const container = document.querySelector('.container-list'); // Define el contenedor aquí
                      
                      search.addEventListener('input', (event) => {
                            const input_value = event.target.value;
                            const filtered_data = data.filter((li) => {
                                  return li.name.toLowerCase().includes(input_value.toLowerCase());
                                  console.log("Loren")
                              });


                    // Limpia el contenedor antes de agregar nuevos elementos
                    container.innerHTML = '';

                    for (const c of filtered_data) {
                        const div = document.createElement('div');
                        div.classList.add('justify-content-start', 'd-flex', );
                        div.textContent = c.name; // Asegúrate de agregar contenido al div
                        container.appendChild(div);
                        document.querySelector('.container-list').classList.add("p-2")
                    }

                    // Opcional: Mostrar mensaje si no hay coincidencias
                    if (filtered_data.length === 0) {
                        const messageDiv = document.createElement('div');
                        messageDiv.classList.add("text-white-50", "text-center", "justify-content-center", )
                        messageDiv.textContent = 'No se encontraron resultados';
                        container.appendChild(messageDiv);
                    }
                });
            },
            error: function(xhr, status, error) {
                console.error('Error en la solicitud AJAX:', status, error);
            }
        });
    }
});
</script>
<style>
      .btn-altern button {
            background-color: transparent;
            border: solid 1px rgba(255, 255, 255, 0.733);
            border-radius: 2rem;
            font-weight: bold;
            color: white;
            margin: 0.3rem;
            padding: 0.2rem 0.7rem;
      }


</style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>